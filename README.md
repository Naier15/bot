<h2 align="center">Telegram bot Bashni.pro</h2><br/>
Протестировано на версии python 3.13<br/>
Настраивается как приложение django проекта<br/>
<br/>

## Quick start
#### Настройки:
- в settings.py добавить `os.environ["DJANGO_ALLOW_ASYNC_UNSAFE"] = "true"`
- в settings.py в список INSTALLED_APPS добавить `telegrambot`
- в django проекте запустить `git clone https://github.com/Naier15/bot`
- `python manage.py migrate` - установить миграцию из bot приложения
- `cd telegrambot` - пройти в директорию бота и добавить файл `.env`
- в файле `.env` нужно указать следующие переменные:<br/>

| Название переменной | (Не)обязательная | Определение |
| :----- | :---: | :------- |
| `BOT_TOKEN = ...` | + | Токен телеграм бота, запросы которого будет обслуживать приложение |
| `DJANGO_PATH = ...` | + | Путь до корня основного Django проекта |
| `TO_SET_COMMANDS = 0` | - | Настроить в боте команду `/menu`<br/>Необходимо запустить с параметром 1 при первом подключении к новому токену |
| `LOG_FILE = log.log` | - | Название файла для логов |
| `MANAGER_LINK = +79679580207` | - | Телеграм бот, на который будет указывать приложение в разделе Помощь |
| `DJANGO_HOST = https://bashni.pro` | - | Url сайта. Нужно изменить если url вдруг поменяется в будущем |
| `REGION = Asia/Vladivostok` | - | Часовой пояс, по времени которого будет происходить ежедневная рассылка новостей |
| `DEBUG = 0` | - | 1 - Уведомления будут приходить каждую минуту <br/>0 - Уведомления будут приходить по параметру времени в DISPATCH_TIME |
| `DISPATCH_TIME = 16:20` | - | Если параметр DEBUG = 0, то уведомления будут проверяться во время указанное в этом параметре |

<br/><br/>

#### Запуск бота:
- `cd telegrambot` - перейти в папку с ботом
- `pip install -U pip` - обновить pip
- `pip install pipenv` - скачать проектный менеджер pipenv
- `pipenv shell` - активировать виртуальную среду
- `pipenv install` - установить все зависимости
- `pipenv run start` - запуск бота

